import {encodeVerifiableCredentialToRLP} from "../src";

it('Encode credential to RLP', () => {
    const credential = {
        credentialSubject: {
            address: 'swtr13sllcdsqhjektac5r6h50dvjrthm0yt6zw3q4s',
            id: 'did:swtr:2HS3hkUJ649YLQJfdAL2ku'
        },
        issuer: { id: 'did:swtr:2HS3hkUJ649YLQJfdAL2ku' },
        type: [ 'VerifiableCredential' ],
        '@context': [ 'https://www.w3.org/2018/credentials/v1' ],
        issuanceDate: '2023-09-22T14:35:48.000Z',
        proof: {
            type: 'JwtProof2020',
            jwt: 'eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJ2YyI6eyJAY29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSJdLCJ0eXBlIjpbIlZlcmlmaWFibGVDcmVkZW50aWFsIl0sImNyZWRlbnRpYWxTdWJqZWN0Ijp7Imt5Y1Bhc3NlZCI6dHJ1ZSwiZGF0ZU9mQmlydGgiOiIwMTAxMTk5MCJ9fSwic3ViIjoiZGlkOnN3dHI6MkhTM2hrVUo2NDlZTFFKZmRBTDJrdSIsIm5iZiI6MTY5NTM5MzM0OCwiaXNzIjoiZGlkOnN3dHI6MkhTM2hrVUo2NDlZTFFKZmRBTDJrdSJ9.oP7MVbI1FZ0FdXsu4Y1qpmErqTVYyCYQiG5-9nnb-Yfi5yXDRgfWYbyEa-HBllcC9SwlLMvVehUrPvXADLQaBw'
        }
    }

    const encodedVC = encodeVerifiableCredentialToRLP(credential)
    expect(encodedVC).toEqual("0xb901d065794a68624763694f694a465a45525451534973496e523563434936496b705856434a392e65794a325979493665794a4159323975644756346443493657794a6f64485277637a6f764c336433647935334d793576636d63764d6a41784f43396a636d566b5a57353061574673637939324d534a644c434a306558426c496a7062496c5a6c636d6c6d6157466962475644636d566b5a57353061574673496c3073496d4e795a57526c626e52705957785464574a715a574e30496a7037496d74355931426863334e6c5a43493664484a315a5377695a4746305a55396d516d6c79644767694f6949774d5441784d546b354d434a396653776963335669496a6f695a476c6b4f6e4e33644849364d6b68544d32687256556f324e446c5a5446464b5a6d524254444a7264534973496d35695a6949364d5459354e544d354d7a4d304f43776961584e7a496a6f695a476c6b4f6e4e33644849364d6b68544d32687256556f324e446c5a5446464b5a6d524254444a7264534a392e6f50374d56624931465a30466458737534593171706d457271545659794359516947352d396e6e622d596669357958445267665759627945612d48426c6c63433953776c4c4d76566568557250765841444c51614277")
}, 15000)